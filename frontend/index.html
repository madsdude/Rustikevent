<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Rustik Event</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/_shared.css"/>
  <meta name="description" content="Koncerter & events i Randers — Rustik Event"/>
</head>
<body>
  <nav class="nav container">
    <div class="logo">R<span style="color:var(--neon)">EVENTS</span></div>
    <div class="nav-right">
      <a class="btn" href="/kalender.html">Kalender</a>
      <a class="btn" href="https://redir.greeter.dk/s/book-rustik-randers" target="_blank">Book bord</a>
      <a class="btn" href="/admin.html">Admin</a>
    </div>
  </nav>

  <header class="hero container">
    <h1>Rustik Event</h1>
    <p>Live musik, DJ-nætter og særlige events — i hjertet af Randers.</p>
    <div style="margin-top:1rem;display:flex;gap:.8rem;justify-content:center;flex-wrap:wrap">
      <a class="btn" href="/kalender.html">Se kalender</a>
      <a class="btn" href="https://redir.greeter.dk/s/book-rustik-randers" target="_blank">Book bord</a>
      <a class="btn" href="https://www.facebook.com/profile.php?id=61577769481002" target="_blank">Facebook</a>
    </div>
  </header>

  <main class="container">
    <section>
      <h2>Kommende events</h2>
      <div id="events" class="grid" style="grid-template-columns:repeat(auto-fill,minmax(260px,1fr))"></div>
    </section>
  </main>

  <footer class="footer">© <span id="year"></span> Rustik Event · Randers · 18+</footer>

  <script>
  const el = document.getElementById('events');
  const year = document.getElementById('year'); year.textContent = new Date().getFullYear();
  fetch('/api/events').then(r=>r.json()).then(list=>{
    const todayStr = new Date().toISOString().slice(0,10);
    const upcoming = list.filter(e=>e.date >= todayStr);
    if(upcoming.length===0){ el.innerHTML = '<p>Ingen planlagte events endnu. Følg os på Facebook for nyheder.</p>'; return; }
    el.innerHTML = upcoming.map(e=>`
      <article class="card">
        ${e.poster_url?`<img src="${e.poster_url}" alt="${e.title}">`:''}
        <div style="padding:1rem">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:.5rem">
            <h3 style="margin:.2rem 0">${e.title}</h3>
            ${e.status==='soldout'?'<span class="badge">Udsolgt</span>':''}
            ${e.status==='cancelled'?'<span class="badge">Aflyst</span>':''}
          </div>
          <p style="opacity:.9;margin:.4rem 0">${e.date}${e.start?` · kl. ${e.start}`:''} · ${e.age||'18+'}</p>
          <div style="display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.6rem">
            <a class="btn" href="https://redir.greeter.dk/s/book-rustik-randers" target="_blank">Book bord</a>
            ${e.facebook_url?`<a class="btn" href="${e.facebook_url}" target="_blank">Facebook</a>`:''}
          </div>
        </div>
      </article>
    `).join('');
  }).catch(()=>{ el.innerHTML = '<p>Kan ikke hente events lige nu.</p>';});
  </script>
</body>
</html>
